# translate it to english
res_engl = iffitoR::translate_iffi(res)
# translate it to english
res_engl = iffitoR::translate_iffi(res)
names(res)
devtools::load_all()
# translate it to english
res_engl = iffitoR::translate_iffi(res)
res_engl
res_time = iffitoR::get_date_information(res_engl)
usethis::use_data(landsld, overwrite = T)
landsld = iffitoR::get_date_information(res_engl)
usethis::use_data(landsld, overwrite = T)
devtools::load_all()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::load_all()
res = make_shapefile(database_dir = database_dir,
attribute_database_name = "tbl_frane",
# the name without extension
dictionary_database_name = "diz_frane",
shapefile = path_spatial,
# normally null only setting it here for me
# the colums we want to retrieve directly
attri = c("anno_min",
"mese_min",
"giorno_min",
"area"),
# tables to join the description
joins = list(
"tbl_frane.Generalita.Cod_tipo" = c(
"diz_frane.diz_tipo_movi.cod_tipo",
"diz_frane.diz_tipo_movi.tipologia"
),
"tbl_frane.clas_ii_liv.movimento" = c(
"diz_frane.diz_movimenti.movimento",
"diz_frane.diz_movimenti.nome_movimento"
),
"tbl_frane.ass_gen_cause.causa" = c(
"diz_frane.diz_cause.causa",
"diz_frane.diz_cause.nome_causa"
)
)
)
devtools::document()
res = make_shapefile(database_dir = database_dir,
attribute_database_name = "tbl_frane",
# the name without extension
dictionary_database_name = "diz_frane",
shapefile = path_spatial,
# normally null only setting it here for me
# the colums we want to retrieve directly
attri = c("anno_min",
"mese_min",
"giorno_min",
"area"),
# tables to join the description
joins = list(
"tbl_frane.Generalita.Cod_tipo" = c(
"diz_frane.diz_tipo_movi.cod_tipo",
"diz_frane.diz_tipo_movi.tipologia"
),
"tbl_frane.clas_ii_liv.movimento" = c(
"diz_frane.diz_movimenti.movimento",
"diz_frane.diz_movimenti.nome_movimento"
),
"tbl_frane.ass_gen_cause.causa" = c(
"diz_frane.diz_cause.causa",
"diz_frane.diz_cause.nome_causa"
)
)
)
devtools
devtools::document()
res = make_shapefile(database_dir = database_dir,
attribute_database_name = "tbl_frane",
# the name without extension
dictionary_database_name = "diz_frane",
shapefile = path_spatial,
# normally null only setting it here for me
# the colums we want to retrieve directly
attri = c("anno_min",
"mese_min",
"giorno_min",
"area"),
# tables to join the description
joins = list(
"tbl_frane.Generalita.Cod_tipo" = c(
"diz_frane.diz_tipo_movi.cod_tipo",
"diz_frane.diz_tipo_movi.tipologia"
),
"tbl_frane.clas_ii_liv.movimento" = c(
"diz_frane.diz_movimenti.movimento",
"diz_frane.diz_movimenti.nome_movimento"
),
"tbl_frane.ass_gen_cause.causa" = c(
"diz_frane.diz_cause.causa",
"diz_frane.diz_cause.nome_causa"
)
)
)
devtools::document()
res = make_shapefile(database_dir = database_dir,
attribute_database_name = "tbl_frane",
# the name without extension
dictionary_database_name = "diz_frane",
shapefile = path_spatial,
# normally null only setting it here for me
# the colums we want to retrieve directly
attri = c("anno_min",
"mese_min",
"giorno_min",
"area"),
# tables to join the description
joins = list(
"tbl_frane.Generalita.Cod_tipo" = c(
"diz_frane.diz_tipo_movi.cod_tipo",
"diz_frane.diz_tipo_movi.tipologia"
),
"tbl_frane.clas_ii_liv.movimento" = c(
"diz_frane.diz_movimenti.movimento",
"diz_frane.diz_movimenti.nome_movimento"
),
"tbl_frane.ass_gen_cause.causa" = c(
"diz_frane.diz_cause.causa",
"diz_frane.diz_cause.nome_causa"
)
)
)
res
devtools::load_all()
res = translate_iffi(res)
names(res)
translate_iffi
translate_iffi(res)
names(res)
!"anno_min|mese_min|giorno_min|tipologia|nome_movimento" %in% names(res)
!"anno_min|mese_min" %in% names(res)
!"anno_min" %in% names(res)
grepl("anno_min|mese_min", names(res))
any()repl("anno_min|mese_min", names(res))
any(repl("anno_min|mese_min", names(res)))
any(grepl("anno_min|mese_min", names(res)))
df
df = res
df
!any(grepl("anno_min|mese_min|giorno_min|tipologia|nome_movimento", names(df)))
devtools::load_all()
ls
res
devtools::document()
# load libraries---------------------------------------------------------------
library(sf)
library(iffitoR)
library(tmap)
library(tidyverse)
library(glue)
library(GADMTools)
library(mapview)
# we want the point data
points = T
# which os to automatically set the paths
os = Sys.info()["sysname"]
if(os == "Linux"){
path_ncdf = "/mnt/CEPH_PROJECTS/Proslide/PREC_GRIDS_updated/"
poly_landslide_path = "/mnt/CEPH_PROJECTS/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/Shapefiles/IFFI10_5.shp"
points_landslide_path = "/mnt/CEPH_PROJECTS/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/Shapefiles/IFFI10_1.shp"
database_dir = "/mnt/CEPH_PROJECTS/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/database"
}else if(os == "Windows"){
path_ncdf = "\\\\projectdata.eurac.edu/projects/Proslide/PREC_GRIDS_updated/"
poly_landslide_path = "\\\\projectdata.eurac.edu/projects/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/Shapefiles/IFFI10_5.shp"
points_landslide_path = "\\\\projectdata.eurac.edu/projects/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/Shapefiles/IFFI10_1.shp"
database_dir = "\\\\projectdata.eurac.edu/projects/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/database"
}else{
stop(call. = F, "what the hell are you working on...")
}
# which shape to read
if(points){
path_spatial = points_landslide_path
}else{
path_spatial = poly_landslide_path
}
res = iffitoR::make_shapefile(database_dir = database_dir,
attribute_database_name = "tbl_frane",
# the name without extension
dictionary_database_name = "diz_frane",
shapefile = path_spatial,
# normally null only setting it here for me
# the colums we want to retrieve directly
attri = c("anno_min",
"mese_min",
"giorno_min",
"area"),
# tables to join the description
joins = list(
"tbl_frane.Generalita.Cod_tipo" = c(
"diz_frane.diz_tipo_movi.cod_tipo",
"diz_frane.diz_tipo_movi.tipologia"
),
"tbl_frane.clas_ii_liv.movimento" = c(
"diz_frane.diz_movimenti.movimento",
"diz_frane.diz_movimenti.nome_movimento"
),
"tbl_frane.ass_gen_cause.causa" = c(
"diz_frane.diz_cause.causa",
"diz_frane.diz_cause.nome_causa"
)
)
)
res = iffitoR::make_shapefile(database_dir = database_dir,
attribute_database_name = "tbl_frane",
# the name without extension
dictionary_database_name = "diz_frane",
shapefile = path_spatial,
# normally null only setting it here for me
# the colums we want to retrieve directly
attri = c("anno_min",
"mese_min",
"giorno_min",
"area"),
# tables to join the description
joins = list(
"tbl_frane.Generalita.Cod_tipo" = c(
"diz_frane.diz_tipo_movi.cod_tipo",
"diz_frane.diz_tipo_movi.tipologia"
),
"tbl_frane.clas_ii_liv.movimento" = c(
"diz_frane.diz_movimenti.movimento",
"diz_frane.diz_movimenti.nome_movimento"
),
"tbl_frane.ass_gen_cause.causa" = c(
"diz_frane.diz_cause.causa",
"diz_frane.diz_cause.nome_causa"
)
)
)
res
# translate to english
res_eng = iffitoR::translate_iffi(res)
# add time information
landsld = iffitoR::get_date_information(res_eng)
# save it
usethis::use_data(landsld, overwrite = T)
?remove.packages
load("data/landsld.rda")
landsld
dim(landsld)
devtools::load_all()
landsld
unique(landsld$second_level)
unique(landsld$nome_movimento)
# load libraries---------------------------------------------------------------
library(sf)
library(iffitoR)
library(tmap)
library(tidyverse)
library(glue)
library(GADMTools)
library(mapview)
# define some paths -------------------------------------------------------
# we want the point data
points = T
# which os to automatically set the paths
os = Sys.info()["sysname"]
if(os == "Linux"){
path_ncdf = "/mnt/CEPH_PROJECTS/Proslide/PREC_GRIDS_updated/"
poly_landslide_path = "/mnt/CEPH_PROJECTS/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/Shapefiles/IFFI10_5.shp"
points_landslide_path = "/mnt/CEPH_PROJECTS/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/Shapefiles/IFFI10_1.shp"
database_dir = "/mnt/CEPH_PROJECTS/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/database"
}else if(os == "Windows"){
path_ncdf = "\\\\projectdata.eurac.edu/projects/Proslide/PREC_GRIDS_updated/"
poly_landslide_path = "\\\\projectdata.eurac.edu/projects/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/Shapefiles/IFFI10_5.shp"
points_landslide_path = "\\\\projectdata.eurac.edu/projects/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/Shapefiles/IFFI10_1.shp"
database_dir = "\\\\projectdata.eurac.edu/projects/Proslide/Landslides/Iffi_db_xxxx_to_2018/exportperEurac2020/database"
}else{
stop(call. = F, "what the hell are you working on...")
}
# which shape to read
if(points){
path_spatial = points_landslide_path
}else{
path_spatial = poly_landslide_path
}
# query the landslide data and its attributes -----------------------------
res = iffitoR::make_shapefile(database_dir = database_dir,
attribute_database_name = "tbl_frane",
# the name without extension
dictionary_database_name = "diz_frane",
shapefile = path_spatial,
# normally null only setting it here for me
# the colums we want to retrieve directly
attri = c("anno_min",
"mese_min",
"giorno_min",
"area"),
# tables to join the description
joins = list(
"tbl_frane.Generalita.Cod_tipo" = c(
"diz_frane.diz_tipo_movi.cod_tipo",
"diz_frane.diz_tipo_movi.tipologia"
),
"tbl_frane.clas_ii_liv.movimento" = c(
"diz_frane.diz_movimenti.movimento",
"diz_frane.diz_movimenti.nome_movimento"
),
"tbl_frane.ass_gen_cause.causa" = c(
"diz_frane.diz_cause.causa",
"diz_frane.diz_cause.nome_causa"
)
)
)
# translate to english
res_eng = iffitoR::translate_iffi(res)
# add time information
landsld = iffitoR::get_date_information(res_eng)
# save it
usethis::use_data(landsld, overwrite = T)
library(iffitoR)
library(shiny)
library(tidyverse)
library(sf)
library(GADMTools)
library(plotly)
library(leaflet)
library(leaflet.extras)
library(iffitoR)
res = landsld
library(shiny)
library(tidyverse)
library(sf)
library(GADMTools)
library(plotly)
library(leaflet)
library(leaflet.extras)
shiny::runApp()
shiny::runApp("local_tests/iffi_data_shiny/")
library(rsconnect)
deployApp(appDir = "local_tests/iffi_data_shiny/")
shiny::runApp()
shiny::runApp(appDir = "local_tests/iffi_data_shiny/")
shiny::runApp(appDir = "local_tests/iffi_data_shiny/")
library(here)
library(here)
shiny::runApp()
shiny::runApp(appDir = "local_tests/iffi_data_shiny/")
st_read("data/landsld.rda")
load("data/landsld.rda")
landsld
shiny::runApp(appDir = "local_tests/iffi_data_shiny/")
shiny::runApp(appDir = "local_tests/iffi_data_shiny/")
source('C:/Users/robin/eurac/R/iffitoR/local_tests/make_data.R', echo=TRUE)
devtools::load_all()
library(shiny)
library(tidyverse)
library(sf)
library(GADMTools)
library(plotly)
library(leaflet)
library(leaflet.extras)
library(iffitoR)
library(here)
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
library(rsconnect)
rsconnect::deployApp(appDir = "local_tests/iffi_data_shiny/")
landsld
st_write(landsld, "local_tests/iffi_data_shiny/landsld.gpkg")
shiny::runApp("local_tests/iffi_data_shiny/")
res=st_read(here("local_tests", "iffi_data_shiny", "landsld.gpkg"))
shiny::runApp("local_tests/iffi_data_shiny/")
shiny::runApp("local_tests/iffi_data_shiny/")
rsconnect::deployApp(appDir = "local_tests/iffi_data_shiny/")
# load libraries---------------------------------------------------------------
library(sf)
library(iffitoR)
library(tmap)
library(tidyverse)
library(glue)
library(GADMTools)
library(mapview)
res = make_shapefile(
database_dir = "../euracR/data/database/",
# normally null only setting it here for me
attribute_database_name = "tbl_frane",
# the name without extension
dictionary_database_name = "diz_frane",
shapefile = "../euracR/data/Shapefiles/IFFI10_1.shp",
# normally null only setting it here for me
# the colums we want to retrieve directly
attri = c("anno_min",
"mese_min",
"giorno_min",
"area"),
# tables to join the description
joins = list(
"tbl_frane.Generalita.Cod_tipo" = c(
"diz_frane.diz_tipo_movi.cod_tipo",
"diz_frane.diz_tipo_movi.tipologia"
),
"tbl_frane.clas_ii_liv.movimento" = c(
"diz_frane.diz_movimenti.movimento",
"diz_frane.diz_movimenti.nome_movimento"
),
"tbl_frane.ass_gen_cause.causa" = c(
"diz_frane.diz_cause.causa",
"diz_frane.diz_cause.nome_causa"
)
)
)
res
res %>% count(anno_min) %>% arrange(desc(year.int))
res %>% count(anno_min) %>% arrange(desc(anno_min))
data %>% filter(anno_min == 2019)
data %>% filter(anno_min == 2019)
res %>% filter(anno_min == 2019)
shiny::runApp("local_tests/iffi_data_shiny/")
devtools::load_all()
browseVignettes(package="iffitoR")
devtools::build_vignettes()
?iffitoR::set_connection
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
```{r}
library(iffitoR)
# the path to the databases
connections = iffitoR::set_connection(".")
library(RODBC)
# the path to the databases
connections = iffitoR::set_connection(".")
rm(list=ls())
sessionInfo()
devtools::load_all()
sessionInfo()
devtools::build_vignettes()
devtools::build_vignettes()
devtools::build_vignettes()
remove.packages("iffitoR")
a = insalled.packages()[,1]
a = installed.packages()[,1]
a
grep("iffi", a)
library(iffitoR)
browseVignettes(package="iffitoR")
detach(package:iffitoR)
library(iffitoR)
browseVignettes(package="iffitoR")
remove.packages("iffitoR")
browseVignettes(package="iffitoR")
detach(package:iffitoR)
browseVignettes(package="iffitoR")
a = installed.packages()[,1]
grep("iffi", a)
ls
library(iffitoR)
remotes::install_github("RobinKohrs/iffitoR")
devtools::build_vignettes()
pkgdown::build_site()
s
?pkgdown::build_site
devtools::build_site()
devtools::build_site()
devtools::load_all()
remotes::install_github("RobinKohrs/iffitoR")
remotes::install_github("RobinKohrs/iffitoR")
remotes::install_github("RobinKohrs/iffitoR")
